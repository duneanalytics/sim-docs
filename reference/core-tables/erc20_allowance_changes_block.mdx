---
title: '@sim.erc20_allowance_changes_block'
excerpt: Changes in allowances in ERC20 contracts
deprecated: false
hidden: false
metadata:
  title: ''
  description: ''
  robots: index
next:
  description: ''
---
**Chains supported:** Ethereum, Base, Arbitrum (post Nitro)

> ðŸŸ¦ Block-level table
>
> For efficiency, we only emit one record per block for each `(token_address, owner, spender)` tuple. If there are 2+ changes for the same tuple in a given block, we emit the last one. This more efficiently serves queries where you want to know state after a given block, but precludes queries that need intra-block (i.e., transaction-level) state.

# Schema

| Column Name      | Data Type  |
| :--------------- | :--------- |
| chain\_id        | long       |
| txn\_hash        | string     |
| block\_number    | long       |
| block\_timestamp | long       |
| token\_address   | string     |
| token\_name      | string     |
| token\_symbol    | string     |
| token\_decimals  | bigDecimal |
| owner            | string     |
| spender          | string     |
| allowance        | bigDecimal |

# Source

This table was built in sim's [ERC20 Allowance Changes Block canvas](https://studio.sim.io/canvases/1266ecf1-5ccb-4049-997f-dbcd14d1f9ab).

# Usage notes

It tracks values in the uint256 format of contract storage. For the presentation users expect, divide values here by 10 to the power of d, where `d` is the `decimals()` of the given contract. See sample queries below.

# Sample queries

[getERC20Allowance](ref:geterc20allowance)

[getERC20Allowances](ref:geterc20allowances)
