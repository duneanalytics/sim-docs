---
title: "DeFi Positions"
description: "Access a wallet's DeFi positions along with USD values and metadata across supported EVM chains."
openapi: "/evm/openapi/defi-positions.json GET /beta/evm/defi/positions/{address}"
sidebarTitle: "DeFi Positions"
---

import { SupportedChains } from '/snippets/supported-chains.mdx';

The DeFi Positions API returns a wallet's active positions across liquidity pools, lending protocols, yield strategies, and tokenized DeFi assets.
Each position includes token holdings, USD valuations, underlying asset metadata, and protocol-specific details such as tick ranges, collateral status, or reward accruals.

Use this endpoint to build portfolio dashboards, risk analytics, or unified position views without querying individual protocol contracts.

<Note>
This endpoint is currently available at the beta path (`/beta/evm/defi/positions`).
Schemas are stable, but response fields may expand as we onboard new protocols.
</Note>

<SupportedChains endpoint="defi_positions" />

<Note>Arbitrum support is not currently available but is coming soon.</Note>

## Supported Protocols

Protocol coverage is organized by position type. Each protocol specifies its supported chains and the API response type under which it appears.

<Accordion title="Chain Coverage Table" icon="table">

| Protocol / Standard | Ethereum (1) | Base (8453) | Optimism (10) | Unichain (130) | Zora (7777777) | World Chain (480) | Ink (57073) | Soneium (1868) | Mode (34443) | BOB (60808) | Shape (360) |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| Uniswap V2 | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ |  |  |  |
| Uniswap V2 Forks | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ |  |  |  |
| Uniswap V3 | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ |  |  |  |
| Uniswap V4 | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ |  |  |  |
| Algebra V3 |  |  |  |  |  |  |  |  |  |  |  |
| iZumi Swap |  | ✓ |  |  |  |  |  |  |  |  |  |
| Aave v2 | ✓ |  |  |  |  |  |  |  |  |  |  |
| Aave v3 | ✓ | ✓ | ✓ |  |  |  |  | ✓ |  |  |  |
| Compound v2 | ✓ |  |  |  |  |  |  |  |  |  |  |
| Compound v3 (Comet) | ✓ | ✓ | ✓ |  |  |  |  |  |  |  |  |
| Moonwell |  | ✓ | ✓ |  |  |  |  |  |  |  |  |
| ERC‑4626 Vaults | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ |
| Pendle v3 | ✓ | ✓ | ✓ |  |  |  |  |  |  |  |  |
| EigenLayer | ✓ |  |  |  |  |  |  |  |  |  |  |

</Accordion>

### Liquidity Pool Positions

Liquidity pool positions represent token pairs deposited into automated market makers (AMMs). These positions may be fungible ERC-20 LP tokens or non-fungible NFT-based positions for concentrated liquidity.

<AccordionGroup>
  <Accordion title="Uniswap V2" icon="droplet">
  **Type:** `UniswapV2`  
  **Chains:** Ethereum (1), Base (8453), Ink (57073), World Chain (480), Soneium (1868), Unichain (130), Zora (7777777), Optimism (10)  
  **Description:** Fungible LP tokens representing constant-product AMM positions. Includes balances of both tokens in the pair and total USD value.
  </Accordion>

  <Accordion title="Uniswap V2 Forks" icon="code-fork">
  **Type:** `UniswapV2`  
  **Chains:** Same as Uniswap V2  
  **Recognized Forks:** SushiSwapV2, PancakeSwapV2, ShibaSwapV2, RingSwap, CroDefiSwap, DXSwap, SquadSwap, TrebleSwapV2, BaseSwap, SharkSwap, RocketSwap, Aerodrome, Infusion, GammaSwap  
  **Description:** Forks are detected by factory address and returned under the same `UniswapV2` type. The `protocol` field in the response indicates the specific fork (e.g., `"protocol": "UniswapV2"` or `"protocol": "SushiSwapV2"`).
  </Accordion>

  <Accordion title="Uniswap V3" icon="layer-group">
  **Type:** `Nft`  
  **Protocol Field:** `"UniswapV3"`  
  **Chains:** Ethereum (1), Base (8453), Ink (57073), Unichain (130), Zora (7777777), World Chain (480), Soneium (1868), Optimism (10)  
  **Description:** NFT-based concentrated liquidity positions. Each position includes tick ranges, token holdings, unclaimed fees, and per-position USD valuations.
  </Accordion>

  <Accordion title="Uniswap V4" icon="layer-group">
  **Type:** `Nft`  
  **Protocol Field:** `"UniswapV4"`  
  **Chains:** Ethereum (1), Unichain (130), Optimism (10), Base (8453), Zora (7777777), World Chain (480), Ink (57073), Soneium (1868)  
  **Description:** Next-generation concentrated liquidity positions with hook support. Similar structure to V3 with additional metadata for pool hooks and custom logic.
  </Accordion>

  <Accordion title="Algebra V3" icon="chart-line">
  **Type:** `Nft`  
  **Protocol Field:** `"AlgebraV3"` (or similar)  
  **Chains:**  
  **Description:** Concentrated liquidity positions compatible with the Algebra V3 architecture. Includes tick ranges and liquidity metadata.
  </Accordion>

  <Accordion title="iZumi Swap" icon="water">
  **Type:** `Nft`  
  **Protocol Field:** `"IzumiSwap"` (or similar)  
  **Chains:** Base (8453)  
  **Description:** Concentrated liquidity positions on the iZumi Swap protocol. Returns NFT-based position data with tick ranges and holdings.
  </Accordion>
</AccordionGroup>

### Lending Positions

Lending positions include supplied collateral (e.g., aTokens, cTokens) and outstanding debt across major lending protocols.

<AccordionGroup>
  <Accordion title="Aave v2" icon="coins">
  **Type:** `Tokenized`  
  **Token Types:** `AtokenV2`, `AaveV2VariableDebt`  
  **Chains:** Ethereum (1)  
  **Description:** Supply positions (aTokens) and variable debt positions on Aave v2. Each position includes the underlying asset, calculated balance, and USD value.
  </Accordion>

  <Accordion title="Aave v3" icon="coins">
  **Type:** `Tokenized`  
  **Token Types:** `AtokenV3`, `AaveV3VariableDebt`  
  **Chains:** Ethereum (1), Base (8453), Soneium (1868), Optimism (10)  
  **Description:** Supply positions (aTokens) and variable debt positions on Aave v3. Includes underlying token metadata and USD valuations.
  </Accordion>

  <Accordion title="Compound v2" icon="building-columns">
  **Type:** `CompoundV2` (combined in API response)  
  **Token Types:** `CTOKEN`, `CTOKEN_BORROW`  
  **Chains:** Ethereum (1)  
  **Description:** Supply and borrow positions across Compound v2 markets. Responses include separate supply and debt quotes with USD values.
  </Accordion>

  <Accordion title="Compound v3 (Comet)" icon="building-columns">
  **Type:** `CompoundV3`  
  **Chains:** Ethereum (1), Base (8453), Optimism (10)  
  **Description:** Base asset supply and borrow positions in Compound v3. Also includes collateral positions for each supported asset in Comet markets.
  </Accordion>

  <Accordion title="Moonwell" icon="moon">
  **Type:** `Moonwell` (combined in API response)  
  **Token Types:** `MTOKEN`, `MTOKEN_BORROW`  
  **Chains:** Base (8453), Optimism (10)  
  **Description:** Supply and borrow positions on Moonwell (a Compound v2 fork). Includes separate supply and debt quotes.
  </Accordion>
</AccordionGroup>

### Yield Positions

Yield positions represent deposits into vaults, structured products, or yield-generating strategies.

<AccordionGroup>
  <Accordion title="ERC-4626 Vaults" icon="vault">
  **Type:** `Erc4626`  
  **Chains:** Ethereum (1), Base (8453), World Chain (480), Mode (34443), Ink (57073), Unichain (130), Zora (7777777), BOB (60808), Soneium (1868), Shape (360), Optimism (10)  
  **Description:** Tokenized vaults conforming to the ERC-4626 standard. Includes vault share balances, underlying asset metadata, and USD valuations. Examples include Yearn v3 vaults and Pendle Yield Principal Tokens (PTs) when wrapped as ERC-4626.
  </Accordion>

  <Accordion title="Pendle v3" icon="chart-area">
  **Type:** `Pendle`  
  **Token Types:** `Principal`, `Yield`, `LP` (in `token_type` field)  
  **Chains:** Ethereum (1), Optimism (10), Base (8453)  
  **Description:** Principal Tokens (PT), Yield Tokens (YT), and LP positions in Pendle v3 markets. Each position includes the underlying asset, market address, and USD value based on the asset price.
  </Accordion>
</AccordionGroup>

### Restaking Positions

<Accordion title="EigenLayer" icon="layer-group">
**Type:** `EigenStrategy` (or similar in API response)  
**Chains:** Ethereum (1)  
**Description:** Share balances in EigenLayer restaking strategies. Includes the strategy contract, underlying token, and USD-denominated position value.
</Accordion>

## Request Parameters

- `chain_ids` — Optional chain filter accepting numeric IDs or supported tags. When omitted, we return all chains tagged as `default`.
- `protocol` — Filter to a specific protocol or category (`aave-v3`, `uniswap-v3`, `erc4626`, etc.).

All requests require the `X-Sim-Api-Key` header with a Sim API key.

## Response Structure

Each response includes the queried wallet, timestamps, an array of positions, and aggregation totals.

- `positions[]` items surface consistent metadata across protocols:
  - **Protocol identifiers:** `protocol_name`, `protocol_id`, and protocol-defined `label`
  - **Location:** `chain_id` and `contract_address`
  - **Valuation:** `amount`, `usd_value`, and `unclaimed_usd_value`
  - **details:** Protocol-specific fields such as token breakdowns, APYs, collateral flags, NFT ticks, or reward inventories. The shape of this object varies by integration and expands over time.

- `aggregations.total_usd_value` sums the USD value of all returned positions.
- `aggregations.total_by_chain` breaks down USD value per chain ID.

### Sample Response

```json
{
  "wallet_address": "0xcB1CBA32a4f9986B7981D6948e8fE2dF5B0c9905",
  "request_time": "2025-03-06T18:12:29Z",
  "response_time": "2025-03-06T18:12:29Z",
  "positions": [
    {
      "protocol_name": "Compound v2",
      "protocol_id": "compound-v2",
      "label": "lend",
      "chain_id": 1,
      "name": "Compound DAI Lending",
      "contract_address": "0x5d3a536e4d6dbd6114cc1ead35777bab948e3643",
      "amount": 250,
      "usd_value": 250.0,
      "unclaimed_usd_value": 5.12,
      "details": {
        "underlying_token": {
          "address": "0x6b175474e89094c44da98b954eedeac495271d0f",
          "symbol": "DAI",
          "decimals": 18
        },
        "supply_apy": 2.1,
        "collateral_enabled": true
      }
    },
    {
      "protocol_name": "Uniswap v3",
      "protocol_id": "uniswap-v3",
      "label": "liquidity",
      "chain_id": 1,
      "name": "Uniswap V3 Position (WETH, USDC)",
      "contract_address": "0xc36442b4a4522e871399cd717abdd847ab11fe88",
      "amount": 1.2345,
      "usd_value": 1234.5,
      "unclaimed_usd_value": 10.45,
      "details": {
        "token0": {
          "address": "0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2",
          "symbol": "WETH",
          "amount": 0.52
        },
        "token1": {
          "address": "0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48",
          "symbol": "USDC",
          "amount": 820.12
        },
        "token_id": 123456,
        "tick_lower": -887220,
        "tick_upper": -276330,
        "share_of_pool": 0.0000125
      }
    }
  ],
  "aggregations": {
    "total_usd_value": 1484.5,
    "total_by_chain": {
      "1": 1484.5
    }
  }
}
```

### Compute Units

Each request consumes two Compute Units per processed chain ID. Filtering to fewer chains lowers usage. Aggregations are calculated server-side and included in the same response.

### Errors

- `400 Bad Request` — Invalid address, malformed cursor, or unsupported parameter value
- `404 Not Found` — No positions found for the wallet on the requested chains
- `500 Internal Server Error` — Retryable server-side failure