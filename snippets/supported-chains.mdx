export const SupportedChains = ({ endpoint }) => {
  const [data, setData] = useState(null);

  useEffect(() => {
    fetch("https://api.sim.dune.com/v1/evm/supported-chains", {
      method: "GET",
      headers: {
        "X-Sim-Api-Key": "sim_DEL8gWK09imHFMUkbrXCy4j9m6L3TsZL",
      },
    })
      .then((response) => response.json())
      .then(setData);
  }, []);

  if (data === null) {
    return null;
  }

  const chains =
    endpoint !== undefined
      ? data.chains.filter((chain) => chain[endpoint]?.supported)
      : data.chains;

  return (
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>ID</th>
          <th>Tags</th>
        </tr>
      </thead>
      <tbody>
        {chains.map((chain) => (
          <tr key={chain.name}>
            <td>{chain.name}</td>
            <td>{chain.chain_id}</td>
            <td>{chain.tags.join(", ")}</td>
          </tr>
        ))}
      </tbody>
    </table>
  );
};
